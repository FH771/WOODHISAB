<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BFIDCWOODHISAB v2 Pro Max Login</title>
<style>
:root{--primary:#22c55e;--secondary:#10b981;--danger:#ef4444;--dark:#020617;--card:#0f172a;--font:'Kalpurush',sans-serif;}
@font-face{font-family:'Kalpurush'; src:url('https://cdn.jsdelivr.net/gh/at-shovo/bangla-fonts/Kalpurush/Kalpurush.ttf') format('truetype');}
body{margin:0;font-family:var(--font);background:linear-gradient(135deg,#020617,#0f172a);color:white;}
#loginLayer{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.85);backdrop-filter:blur(10px);z-index:10000;}
.login-box{background:rgba(15,23,42,0.85);padding:40px;border-radius:20px;width:340px;text-align:center;border:1px solid var(--primary);backdrop-filter:blur(10px);}
input,button{width:100%;padding:12px;margin-top:12px;border-radius:12px;border:none;font-size:16px;box-sizing:border-box;background:rgba(15,23,42,0.7);color:white;border:1px solid #334155;}
input:focus{outline:2px solid var(--primary);}
button{background:var(--primary);cursor:pointer;font-weight:bold;transition:.2s;}
button:hover{transform:scale(1.05);}
.toggle{margin-top:10px;color:var(--secondary);cursor:pointer;font-size:14px;}
.msg{margin-top:10px;font-size:13px;color:var(--danger);}
</style>
</head>
<body>

<div id="loginLayer">
  <div class="login-box">
    <h2>BFIDCWOODHISAB v2 Pro Max</h2>
    <input type="email" id="emailInput" placeholder="Email">
    <input type="password" id="passwordInput" placeholder="Password" onkeydown="if(event.key==='Enter') handleAuth()">
    <button id="mainBtn" onclick="handleAuth()">Register</button>
    <div class="toggle" id="toggleText" onclick="toggleMode()">Already have account? Login</div>
    <div class="msg" id="msg"></div>
  </div>
</div>

<div id="appArea" style="display:none;">
  <h2 style="text-align:center; margin-top:50px;">Welcome to BFIDCWOODHISAB</h2>
</div>

<script>
// Initial setup
let mode='register';
const mainBtn=document.getElementById('mainBtn');
const toggleText=document.getElementById('toggleText');
const msg=document.getElementById('msg');
const emailInput=document.getElementById('emailInput');
const passwordInput=document.getElementById('passwordInput');

// Hash function (simple for demo)
function hashPwd(pwd){
  let hash=0;
  for(let i=0;i<pwd.length;i++){hash=((hash<<5)-hash)+pwd.charCodeAt(i);hash=hash & hash;}
  return hash;
}

// Pre-add admin if not exists
let users=JSON.parse(localStorage.getItem('bfidc_users')||'[]');
if(!users.find(u=>u.email==='lpcfahad7@gmail.com')){
  users.push({email:'lpcfahad7@gmail.com', pwd:hashPwd('547087')});
  localStorage.setItem('bfidc_users', JSON.stringify(users));
}

function toggleMode(){
  if(mode==='register'){
    mode='login';
    mainBtn.textContent='Login';
    toggleText.textContent='No account? Register';
    msg.textContent='';
  } else {
    mode='register';
    mainBtn.textContent='Register';
    toggleText.textContent='Already have account? Login';
    msg.textContent='';
  }
}

function handleAuth(){
  const email=emailInput.value.trim().toLowerCase();
  const pwd=passwordInput.value.trim();
  if(!email || !pwd){msg.textContent='Fill all fields'; return;}
  if(pwd.length<6){msg.textContent='Password must be 6+ characters'; return;}
  
  users=JSON.parse(localStorage.getItem('bfidc_users')||'[]');
  
  if(mode==='register'){
    if(users.find(u=>u.email===email)){msg.textContent='Email already exists'; return;}
    users.push({email, pwd:hashPwd(pwd)});
    localStorage.setItem('bfidc_users', JSON.stringify(users));
    sessionStorage.setItem('loggedIn', email);
    showApp();
  } else { // login
    let user=users.find(u=>u.email===email && u.pwd===hashPwd(pwd));
    if(user){sessionStorage.setItem('loggedIn', email); showApp();}
    else msg.textContent='Wrong email or password';
  }
}

function showApp(){
  document.getElementById('loginLayer').style.display='none';
  document.getElementById('appArea').style.display='block';
}

// Auto-login if session exists
window.onload=function(){
  let logged=sessionStorage.getItem('loggedIn');
  if(logged){showApp();}
}
</script>
</body>
</html>
